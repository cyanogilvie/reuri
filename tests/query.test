if {[lsearch [namespace children] ::tcltest] == -1} {
    package require tcltest
    namespace import ::tcltest::*
}

tcltest::loadTestedCommands
package require reuri

set t	query_values
test $t-1.0.0 {empty}			{ reuri::query values {} foo					} {}
test $t-1.0.1 {empty}			{ reuri::query values {?} foo					} {}
test $t-1.1 {missing}			{ reuri::query values {?xyz=a} foo				} {}
test $t-1.2 {exists, single}	{ reuri::query values {?foo=a} foo				} a
test $t-1.3 {exists, multiple}	{ reuri::query values {?foo=a&foo=bar} foo		} {a bar}
test $t-1.4 {exists, multiple}	{ reuri::query values {?foo=a&x=y&foo=bar} foo	} {a bar}

set t	query_names
test $t-1.0.0 {empty}			{ reuri::query names {}						} {}
test $t-1.0.1 {empty}			{ reuri::query names {?}					} {}
test $t-1.1 {missing}			{ reuri::query names {?xyz=a}				} xyz
test $t-1.2 {exists, single}	{ reuri::query names {?foo=a}				} foo
test $t-1.3 {exists, multiple}	{ reuri::query names {?foo=a&foo=bar}		} {foo foo}
test $t-1.4 {exists, multiple}	{ reuri::query names {?foo=a&x=y&foo=bar}	} {foo x foo}

# cleanup
::tcltest::cleanupTests
return

# vim: ft=tcl foldmethod=marker foldmarker=<<<,>>> ts=4 shiftwidth=4
